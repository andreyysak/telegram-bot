generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id           Int      @id @default(autoincrement())
  email             String?  @unique
  phone             String?  @unique
  telegram_name     String?
  telegram_username String?
  telegram_user_id  String   @unique
  country           String?
  city              String?
  image             String?
  created_at        DateTime @default(now())

  trips Trip[] @relation("UserTrips")
  fuels Fuel[] @relation("UserFuels")

  @@map("User")
}

model Trip {
  trip_id          Int      @id @default(autoincrement())
  telegram_user_id String
  kilometrs        Float
  direction        String
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt

  user User @relation("UserTrips", fields: [telegram_user_id], references: [telegram_user_id], onDelete: Cascade)
}

model Fuel {
  gas_id     Int      @id @default(autoincrement())
  user_id    Int
  liters     Float
  price      Float
  station    String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  user User @relation("UserFuels", fields: [user_id], references: [user_id], onDelete: Cascade)
}
